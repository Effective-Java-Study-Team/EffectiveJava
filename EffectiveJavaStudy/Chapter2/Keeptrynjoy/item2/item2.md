# ITEM 1. "생성자에 매개변수가 많다면 빌더를 고려하라."

- telescoping constructor pattern(점층적 생성자 패턴)
    - 원하는 매개 변수별로 생성자를 전부 생성하는 방식
    - 확장하기 어렵고, 클라이언트 코드를 작성하거나 읽기 어려움.
  

- JavaBeans pattern(자바빈즈 패턴)
    - 매개 변수가 없는 생성자로 객체를 만든 후 세터 메서드들을 호출해 원하는 매개변수의 값을 설정하는 방식
    - 객체 하나를 만들려면 메서드를 여러개 호출해야하고, 객체가 완전히 생성되기 전까지 일관성(consistency)이 무너진 상태에 놓이게 됨.
    - 일관성이 무너지는 문제 때문에 클래스를 불변성으로 만들 수 없음.


## builder pattern(빌더 패턴)

- 필수 매개변수 만으로 생성자를 호출해 빌더 객체를 얻고, 빌더객체가 제공하는 일종의 세터메서드들로 원하는 선택 매개변수를 설정한 뒤 매개변수가 없는 build 메서드로 호출해 필요한 객체를 얻음
- 빌더는 생성할 클래스 안에 정적 멤버 클래스로 만들어 두는 게 보통임.
- 빌더 패턴은 파이썬과 스칼라에 있는 명명된 선택적 매개변수(named optional parameters)를 흉내 낸 것임.

### 빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기가 좋음

- 시뮬레이트한 셀프 타입(simulated self-type) 관용구
    - self 타입이 없는 자바를 위한 우회 방법
    - 추상메서드인 self를 더해 하위클래스에서 형 변환하지 않고도 메서드 연쇄를 지원할 수 있음.
    

- 공변 반환 타이핑(convariant return typing)
    - 하위 클래스의 메서드가 상위 클래스의 메서드가 정의한 반환 타입이 아닌, 그 하위 타입을 반환하는 기능
    - 이 기능을 사용시 클라이언트가 형변환에 신경 쓰지 않고도 빌더를 사용할 수 있음.

### 빌더패턴의 단점

- 객체를 만드려면, 그에 앞서 빌더 부터만들어야함. 빌더 생성 비용이 크지 않지만 성능에 민감한 상황에서는 문제가 될 수 있음.
- 점층적 생성자 패턴과 비교하여 매개변수가 4개 이상은 되어야 빌더를 사용한 효과를 볼 수 있음.
  다만, API는 시간이 지날 수록 매개 변수가 많아지는경향이 있기에 처음 부터 빌더로 시작하는 편이 나을때가 많음.